<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nekotexs | Main page</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&family=Press+Start+2P&display=swap" rel="stylesheet">
    
    <!-- Firebase SDKs -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getAuth, signInAnonymously, signInWithCustomToken, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        import { getFirestore, doc, setDoc, serverTimestamp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

        const appId = typeof __app_id !== 'undefined' ? __app_id : 'default-app-id';
        const firebaseConfig = typeof __firebase_config !== 'undefined' ? JSON.parse(__firebase_config) : null;
        const initialAuthToken = typeof __initial_auth_token !== 'undefined' ? __initial_auth_token : null;

        let db, auth;

        if (firebaseConfig) {
            const app = initializeApp(firebaseConfig);
            db = getFirestore(app);
            auth = getAuth(app);

            onAuthStateChanged(auth, async (user) => {
                if (!user) {
                    try {
                        if (initialAuthToken) await signInWithCustomToken(auth, initialAuthToken);
                        else await signInAnonymously(auth);
                    } catch (e) { console.error("Auth init error", e); }
                }
            });
        }

        // --- AUTO-LOGIN LOGIC ---
        document.addEventListener("DOMContentLoaded", () => {
            const savedWallet = localStorage.getItem('neko_wallet');
            const isLogout = new URLSearchParams(window.location.search).get('action') === 'logout';

            // If wallet exists and user didn't just log out, redirect automatically
            if (savedWallet && !isLogout) {
                console.log("Auto-login detected for:", savedWallet);
                // Adding a small delay for visual effect or immediate redirect
                document.getElementById('loadingOverlay').classList.remove('hidden');
                setTimeout(() => {
                    window.location.href = "dash.html";
                }, 800);
            }
        });

        window.connectPhantom = async () => {
            const { solana } = window;
            if (solana && solana.isPhantom) {
                try {
                    const response = await solana.connect();
                    const address = response.publicKey.toString();
                    await finalizeLogin(address, "phantom");
                } catch (err) {
                    console.error(err);
                }
            } else {
                alert("Phantom Wallet not found!");
                window.open("https://phantom.app/", "_blank");
            }
        };

        window.submitManualWallet = async () => {
            const input = document.getElementById('manualWalletInput');
            const address = input.value.trim();
            if (!address) {
                input.classList.add('border-red-500');
                return;
            }
            await finalizeLogin(address, "manual");
        };

        async function finalizeLogin(address, method) {
            try {
                localStorage.setItem('neko_wallet', address);

                if (db) {
                    // Saving initial user data to public path for consistency
                    await setDoc(doc(db, "artifacts", appId, "public", "data", "users", address), {
                        wallet: address,
                        lastLogin: serverTimestamp(),
                        platform: "web",
                        method: method
                    }, { merge: true });
                }

                window.location.href = "user_dashboard_en.html";
            } catch (e) {
                console.error("Login error", e);
                window.location.href = "user_dashboard_en.html"; 
            }
        }

        window.openModal = () => document.getElementById('walletModal').classList.remove('hidden');
        window.closeModal = () => document.getElementById('walletModal').classList.add('hidden');
    </script>

    <style>
        body { font-family: 'Inter', sans-serif; background-color: #050505; color: #ffffff; overflow-x: hidden; }
        .font-pixel { font-family: 'Press Start 2P', cursive; }
        .glow-text { text-shadow: 0 0 20px rgba(255, 140, 0, 0.6); }
        .glass-panel { background: rgba(255, 255, 255, 0.03); backdrop-filter: blur(10px); border: 1px solid rgba(255, 255, 255, 0.1); }
        .btn-primary { background: linear-gradient(90deg, #ff8c00, #ff4500); transition: all 0.3s ease; }
        .btn-primary:hover { transform: translateY(-2px); box-shadow: 0 0 20px rgba(255, 69, 0, 0.4); }
        @keyframes scroll { 0% { transform: translateX(0); } 100% { transform: translateX(-50%); } }
        .ticker-wrap { overflow: hidden; white-space: nowrap; }
        .ticker { display: inline-block; animation: scroll 20s linear infinite; }
        .modal-enter { animation: fadeIn 0.3s ease-out forwards; }
        @keyframes fadeIn { from { opacity: 0; transform: scale(0.95); } to { opacity: 1; transform: scale(1); } }
    </style>
</head>
<body class="antialiased selection:bg-orange-500 selection:text-white">

    <!-- Auto-Login Overlay -->
    <div id="loadingOverlay" class="fixed inset-0 bg-black z-[200] hidden flex items-center justify-center">
        <div class="text-center">
            <div class="w-16 h-16 border-4 border-orange-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"></div>
            <p class="text-orange-500 font-mono text-sm animate-pulse">RETURNING TO DASHBOARD...</p>
        </div>
    </div>

    <!-- Navigation -->
    <nav class="w-full fixed top-0 z-50 border-b border-gray-800 bg-black/80 backdrop-blur-md">
        <div class="max-w-7xl mx-auto px-6 h-20 flex items-center justify-between">
            <div class="flex items-center gap-3">
                <img src="img/logo.png" alt="Nekotexs Logo" class="w-10 h-10 object-contain drop-shadow-[0_0_10px_rgba(255,140,0,0.5)]">
                <span class="font-pixel text-xl tracking-tighter text-white"><span class="text-orange-500">NEKO</span>TEXS</span>
            </div>
            <div class="flex items-center gap-6">
                <div class="hidden md:flex gap-6">
                    <a href="#features" class="text-gray-400 hover:text-white transition text-sm font-medium">Features</a>
                    <a href="#tokenomics" class="text-gray-400 hover:text-white transition text-sm font-medium">Tokenomics</a>
                    <a href="#roadmap" class="text-gray-400 hover:text-white transition text-sm font-medium">Roadmap</a>
                </div>
                <button onclick="openModal()" class="btn-primary px-6 py-2 rounded-full font-bold text-sm tracking-wide uppercase">
                    Connect Wallet
                </button>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <header class="relative pt-32 pb-20 lg:pt-48 lg:pb-32 overflow-hidden">
        <div class="absolute top-0 left-1/2 -translate-x-1/2 w-full h-full z-0 pointer-events-none">
            <div class="absolute top-20 left-20 w-96 h-96 bg-orange-600/20 rounded-full blur-[120px]"></div>
            <div class="absolute bottom-0 right-0 w-[500px] h-[500px] bg-purple-900/20 rounded-full blur-[120px]"></div>
        </div>

        <div class="max-w-7xl mx-auto px-6 relative z-10 text-center">
            <div class="inline-block mb-4 px-3 py-1 rounded-full border border-orange-500/30 bg-orange-500/10 text-orange-400 text-xs font-bold uppercase tracking-widest animate-pulse">
                Beta v1.0 is Live on Solana
            </div>
            <h1 class="text-5xl md:text-7xl font-extrabold tracking-tight leading-tight mb-6">
                Trade Crypto.<br>
                <span class="text-transparent bg-clip-text bg-gradient-to-r from-orange-400 to-red-500 glow-text">Save Cats.</span>
            </h1>
            <p class="text-gray-400 text-lg md:text-xl max-w-2xl mx-auto mb-10 font-light">
                The first decentralized exchange that rewards you for trading and automatically donates 2% of every transaction to feline shelters worldwide. 
                <br><span class="text-orange-400 font-medium">No KYC. Pure Impact. Fully On-Chain.</span>
            </p>
            
            <div class="flex flex-col md:flex-row justify-center gap-4">
                <button onclick="openModal()" class="btn-primary px-8 py-4 rounded-lg font-bold text-lg shadow-lg shadow-orange-500/20">
                    Start Trading Now
                </button>
                <button class="px-8 py-4 rounded-lg border border-gray-700 hover:bg-gray-800 transition text-gray-300 font-medium">
                    Live Chart
                </button>
            </div>
        </div>
    </header>

    <!-- Ticker Strip -->
    <div class="w-full bg-orange-600/10 border-y border-orange-500/20 py-3 ticker-wrap">
        <div class="ticker font-pixel text-xs text-orange-400 uppercase tracking-widest">
            $NEKO LIVE  +++  SOLANA NETWORK  +++  2% CHARITY TAX  +++  NO KYC REQUIRED  +++  EARN REWARDS  +++  SAVE THE CATS  +++  $NEKO LIVE  +++  SOLANA NETWORK  +++  2% CHARITY TAX  +++  NO KYC REQUIRED  +++  EARN REWARDS  +++  SAVE THE CATS  +++
        </div>
    </div>

    <!-- Detailed Features Grid -->
    <section id="features" class="py-24 bg-black border-b border-gray-800 relative">
        <div class="max-w-7xl mx-auto px-6">
            <div class="text-center mb-16">
                <h2 class="text-3xl font-bold mb-4">How It Works</h2>
                <p class="text-gray-400">Simple steps to start earning and helping.</p>
            </div>
            <div class="grid md:grid-cols-3 gap-8">
                <!-- Step 1 -->
                <div class="glass-panel p-8 rounded-2xl hover:bg-white/5 transition group relative overflow-hidden">
                    <div class="absolute -right-4 -top-4 text-9xl font-bold text-white/5">1</div>
                    <div class="w-14 h-14 bg-gray-900 rounded-xl flex items-center justify-center mb-6 text-2xl border border-gray-800">üîó</div>
                    <h3 class="text-xl font-bold mb-3 text-white">Connect Wallet</h3>
                    <p class="text-gray-400 text-sm leading-relaxed">Link your Phantom or Solflare wallet. No registration, no email, no personal data required.</p>
                </div>
                <!-- Step 2 -->
                <div class="glass-panel p-8 rounded-2xl hover:bg-white/5 transition group relative overflow-hidden">
                    <div class="absolute -right-4 -top-4 text-9xl font-bold text-white/5">2</div>
                    <div class="w-14 h-14 bg-gray-900 rounded-xl flex items-center justify-center mb-6 text-2xl border border-gray-800">üîÑ</div>
                    <h3 class="text-xl font-bold mb-3 text-white">Swap Tokens</h3>
                    <p class="text-gray-400 text-sm leading-relaxed">Trade SOL, USDC, and other tokens. 2% of fees go directly to our verified charity wallet.</p>
                </div>
                <!-- Step 3 -->
                <div class="glass-panel p-8 rounded-2xl hover:bg-white/5 transition group relative overflow-hidden">
                    <div class="absolute -right-4 -top-4 text-9xl font-bold text-white/5">3</div>
                    <div class="w-14 h-14 bg-gray-900 rounded-xl flex items-center justify-center mb-6 text-2xl border border-gray-800">üéÅ</div>
                    <h3 class="text-xl font-bold mb-3 text-white">Earn Rewards</h3>
                    <p class="text-gray-400 text-sm leading-relaxed">Holders receive airdrops. Use our browser extension to mine $NEKO passively while surfing.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Tokenomics Section -->
    <section id="tokenomics" class="py-24 relative overflow-hidden bg-gray-900/20">
        <div class="max-w-7xl mx-auto px-6 grid lg:grid-cols-2 gap-16 items-center">
            <div>
                <h2 class="text-4xl font-extrabold mb-6">Tokenomics</h2>
                <p class="text-gray-400 mb-8 text-lg">Designed for sustainability. A deflationary mechanism combined with automatic liquidity generation.</p>
                
                <div class="space-y-6">
                    <div>
                        <div class="flex justify-between text-sm font-bold mb-2"><span>Liquidity Pool</span><span class="text-orange-500">45%</span></div>
                        <div class="h-2 bg-gray-800 rounded-full overflow-hidden"><div class="h-full bg-orange-500 w-[45%]"></div></div>
                    </div>
                    <div>
                        <div class="flex justify-between text-sm font-bold mb-2"><span>Community Airdrop</span><span class="text-orange-400">30%</span></div>
                        <div class="h-2 bg-gray-800 rounded-full overflow-hidden"><div class="h-full bg-orange-400 w-[30%]"></div></div>
                    </div>
                    <div>
                        <div class="flex justify-between text-sm font-bold mb-2"><span>Charity Fund</span><span class="text-green-500">15%</span></div>
                        <div class="h-2 bg-gray-800 rounded-full overflow-hidden"><div class="h-full bg-green-500 w-[15%]"></div></div>
                    </div>
                </div>
            </div>
            <div class="relative">
                <div class="glass-panel p-10 rounded-3xl border-orange-500/20 relative z-10 backdrop-blur-xl">
                    <div class="flex items-center justify-between mb-8">
                        <div><p class="text-gray-400 text-sm">Contract Address</p><p class="font-mono text-xs text-orange-500 mt-1">Solana: 7xKX...9jLq</p></div>
                        <div class="w-10 h-10 bg-orange-500 rounded-full flex items-center justify-center font-bold text-black">N</div>
                    </div>
                    <div class="space-y-4">
                        <div class="flex justify-between items-center bg-white/5 p-3 rounded-lg"><span class="text-sm">üê± Donation Wallet</span><span class="text-xs font-mono text-green-400">Active</span></div>
                        <div class="flex justify-between items-center bg-white/5 p-3 rounded-lg"><span class="text-sm">üîí LP Lock</span><span class="text-xs font-mono text-green-400">100 Years</span></div>
                        <div class="flex justify-between items-center bg-white/5 p-3 rounded-lg"><span class="text-sm">üî• Burn Rate</span><span class="text-xs font-mono text-orange-400">1% per Tx</span></div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="py-12 border-t border-gray-800 bg-black text-sm">
        <div class="max-w-7xl mx-auto px-6 flex flex-col md:flex-row justify-between items-center gap-6">
            <div class="flex items-center gap-3">
                <div class="w-8 h-8 bg-gray-800 rounded flex items-center justify-center font-pixel text-[10px] text-gray-400">NK</div>
                <span class="text-gray-500">¬© 2025 Nekotexs Protocol.</span>
            </div>
            <div class="flex gap-6">
                <a href="#" class="text-gray-500 hover:text-white transition">Twitter</a>
                <a href="#" class="text-gray-500 hover:text-white transition">Telegram</a>
                <a href="#" class="text-gray-500 hover:text-white transition">Docs</a>
            </div>
        </div>
    </footer>

    <!-- Modal -->
    <div id="walletModal" class="fixed inset-0 z-[100] hidden flex items-center justify-center">
        <div class="absolute inset-0 bg-black/90 backdrop-blur-sm" onclick="closeModal()"></div>
        <div class="relative bg-[#0a0a0a] border border-orange-500/50 p-8 rounded-2xl w-full max-w-md shadow-[0_0_50px_rgba(255,140,0,0.2)] modal-enter mx-4">
            <div class="text-center mb-6">
                <h3 class="text-2xl font-bold text-white">Connect Wallet</h3>
                <p class="text-gray-400 text-xs mt-2">Choose your preferred method</p>
            </div>
            <div class="space-y-4">
                <button onclick="connectPhantom()" class="w-full bg-[#AB9FF2] hover:bg-[#9a8ee0] text-black font-bold py-3 rounded-lg flex items-center justify-center gap-3 transition hover:scale-[1.02]">
                    <img src="https://cryptologos.cc/logos/phantom-phantom-logo.png" class="w-6 h-6" alt="Phantom">
                    Connect Phantom
                </button>
                <div class="text-center text-gray-600 text-xs">- OR -</div>
                <div>
                    <input type="text" id="manualWalletInput" class="w-full bg-gray-900 border border-gray-700 rounded-lg px-4 py-3 text-white focus:border-orange-500 focus:outline-none font-mono text-sm text-center placeholder-gray-600 mb-2" placeholder="Enter Address Manually (7xKX...)">
                    <button onclick="submitManualWallet()" class="w-full border border-orange-500/30 text-orange-500 hover:bg-orange-500/10 font-bold py-3 rounded-lg transition uppercase tracking-wider text-sm">Enter Address</button>
                </div>
            </div>
            <button onclick="closeModal()" class="absolute top-4 right-4 text-gray-500 hover:text-white text-xl">‚úï</button>
        </div>
    </div>
</body>
</html>
